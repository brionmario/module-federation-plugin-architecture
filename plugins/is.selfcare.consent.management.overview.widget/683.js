"use strict";(self.webpackChunkselfcare_consent_management_overview_widget=self.webpackChunkselfcare_consent_management_overview_widget||[]).push([[683],{43683:(e,t,a)=>{a.r(t),a.d(t,{Field:()=>z,Forms:()=>A,GroupFields:()=>I,filterPassedProps:()=>y,useNonInitialEffect:()=>h,useTrigger:()=>m});var n=a(46232),r=a.n(n),l=a(29659),o=a(89105),s=a.n(o),c=a(24544),u=a(4793),d=a(72265),i=a(72070),p=a(50963);const m=()=>{const[e,t]=(0,n.useState)(!1);return[e,()=>{t(!e)}]},h=(e,t)=>{const a=(0,n.useRef)(!0);(0,n.useEffect)((()=>{let t;if(a.current?a.current=!1:t=e(),t&&"function"==typeof t)return t()}),t)},y=e=>(delete e.type,delete e.name,delete e.label,delete e.listen,delete e.autoFocus,delete e.readOnly,delete e.disabled,delete e.required,delete e.requiredErrorMessage,delete e.validation,delete e.value,delete e.placeholder,delete e.children,delete e.default,delete e.showPassword,delete e.hidePassword,delete e.width,delete e.placeholder,delete e.className,delete e.size,delete e.onClick,delete e.startIndex,delete e.endIndex,delete e.wrapper,delete e.wrapperProps,delete e.hidden,delete e.displayErrorOn,delete e.icon,e);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f.apply(this,arguments)}const g=e=>{const[t,a]=(0,n.useState)(!1),o=y({...e});return r().createElement(l.Z.Input,f({},o,{label:e.label,value:e.value,error:e.error,type:t?"text":e.type,placeholder:e.placeholder,name:e.name,width:e.width,onBlur:e.onBlur,onChange:e.onChange,icon:r().createElement(u.Z,{trigger:r().createElement(i.Z,{name:t?"eye slash":"eye",disabled:!e.value,link:!0,onClick:()=>{a(!t)}}),position:"top center",content:t?e.hidePassword:e.showPassword,inverted:!0,popper:r().createElement("div",{style:{filter:"none"}})}),autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,required:e.required}))};var b=a(14325),v=a(12638),E=a(89165),w=a(12538),k=a(9024);const Z=e=>{const{value:t,onChange:a}=e,o=[",","&","=","?"],[s,c]=(0,n.useState)(""),[p,m]=(0,n.useState)(""),[h,y]=(0,n.useState)(""),[f,g]=(0,n.useState)([]),Z=e=>({name:e?.split("=")[0],value:e?.split("=")[1]}),C=e=>e.name+"="+e.value,M=e=>e?.map(C)?.join("&");(0,n.useEffect)((()=>{(0,v.Z)(t)||g(t.split("&")?.map(Z))}),[t]),(0,n.useEffect)((()=>{((e,t)=>{t({target:{value:M(e)}})})(f,a)}),[f]);const O=e=>{13===(e.which||e.charCode||e.keyCode)&&S(e)},S=e=>{if(e.preventDefault(),(0,v.Z)(s)||(0,v.Z)(p))return;y("");let t=!1;if(o.map((e=>{(p.includes(e)||s.includes(e))&&(y('Cannot include "'+e+'" as a query parameter.'),t=!0)})),t)return;const a=[{name:s,value:p}];var n;f.forEach((function(e){const t=a.filter((t=>t.name==e.name));if(t.length){const n=a.indexOf(t[0]);a[n].value=e.value+" "+a[n].value}else a.push(e)})),g(a),c((n={name:"",value:""})?.name),m(n?.value)};return r().createElement(r().Fragment,null,r().createElement(l.Z.Group,{inline:!0,widths:"equal",unstackable:!0},r().createElement(l.Z.Input,{fluid:!0,value:s,focus:!0,placeholder:"name",onChange:(e,t)=>{c(t.value)},onKeyDown:O}),r().createElement(l.Z.Input,{fluid:!0,value:p,focus:!0,placeholder:"value",onChange:(e,t)=>{m(t.value)},onKeyDown:O}),r().createElement(u.Z,{trigger:r().createElement(d.Z,{onClick:e=>S(e),icon:"add",type:"button",disabled:!1}),position:"top center",content:"Add key value pair",inverted:!0,popper:r().createElement("div",{style:{filter:"none"}})})),r().createElement(w.Z,{visible:""!==h,error:!0,content:h}),f&&f?.map(((e,t)=>{const a=e.name+"="+e.value;return r().createElement(k.Z,{key:t},a,r().createElement(i.Z,{name:"delete",onClick:()=>(e=>{(0,v.Z)(e)||g((0,b.Z)(f,(t=>!(0,E.Z)(t,Z(e)))))})(a)}))})))},C=e=>{const{value:t,defaultValue:a,"data-componentid":o,error:s,onBlur:c,onChange:p}=e,[m,h]=(0,n.useState)(""),[y,f]=(0,n.useState)([]);(0,n.useEffect)((()=>{(0,v.Z)(t)||f(t.split(" ")?.map(g))}),[t]),(0,n.useEffect)((()=>{M(y,p)}),[y]);const g=e=>({value:e}),Z=e=>e.value,C=e=>e?.map(Z)?.join(" "),M=(e,t)=>{t({target:{value:C(e)}})},O=e=>{if(e.preventDefault(),(0,v.Z)(m))return;const t=[{value:m}];y.forEach((function(e){t.filter((t=>t.value==e.value)).length||t.push(e)})),f(t),h("")};return r().createElement(r().Fragment,null,r().createElement(l.Z.Group,{inline:!0,widths:"equal",unstackable:!0},r().createElement(l.Z.Input,{fluid:!0,value:m,onBlur:c,focus:!0,onChange:(e,t)=>{h(t.value.trim())},onKeyDown:e=>{"Enter"===e.key&&O(e)},"data-componentid":o}),r().createElement(u.Z,{trigger:r().createElement(d.Z,{onClick:e=>O(e),icon:"add",type:"button",disabled:!1,"data-componentid":o+"-add-button"}),position:"top center",content:"Add scope",inverted:!0,popper:r().createElement("div",{style:{filter:"none"}})})),r().createElement(w.Z,{visible:!(0,v.Z)(s),error:!0,content:s}),y&&y?.map(((e,t)=>{const n=e.value;return n==a?r().createElement(k.Z,{key:t},n):r().createElement(k.Z,{key:t},n,r().createElement(i.Z,{name:"delete",onClick:()=>{return e=n,void((0,v.Z)(e)||f((0,b.Z)(y,(t=>!(0,E.Z)(t,g(e))))));var e}}))})))},M=e=>"email"===e.type||"password"===e.type||"number"===e.type||"text"===e.type||"textarea"===e.type,O=e=>"radio"===e.type,S=e=>"password"===e.type,P=e=>"dropdown"===e.type,F=e=>"checkbox"===e.type,q=e=>"scopes"===e.type,B=e=>"queryParams"===e.type,x=e=>"toggle"===e.type,N=e=>M(e)||F(e)||P(e)||O(e)||S(e)||x(e)||B(e)||q(e);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},D.apply(this,arguments)}const K="Enter",R=r().forwardRef(((e,t)=>{const{passedProps:a,formProps:n}=e,o={...a},m=y({...a}),{checkError:h,handleBlur:f,handleChange:b,handleToggle:v,handleChangeCheckBox:E,handleReset:w,form:k}=n,N=s()({hidden:o.hidden,"read-only":o.readOnly},o.className);return r().createElement(l.Z.Field,{className:N},r().createElement("div",{ref:t},(e=>{const{isError:t,errorMessages:n}=h(e);return M(e)?S(e)?r().createElement(g,D({},a,{label:""!==e.label?e.label:null,width:e.width,error:!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e)))},type:e.type,placeholder:e.placeholder,name:e.name,value:k.get(e.name)||"",onBlur:t=>{f(t,e.name)},onChange:t=>{b(t.currentTarget.value,e.name)},showPassword:e.showPassword,hidePassword:e.hidePassword,autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,required:!!e.label&&e.required,onKeyPress:t=>{t.key===K&&f(t,e.name)}})):"textarea"===e.type?r().createElement(l.Z.TextArea,D({},m,{label:""!==e.label?e.label:null,width:e.width,error:!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e)))},type:e.type,placeholder:e.placeholder,name:e.name,value:k.get(e.name)?.toString()||"",onBlur:t=>{f(t,e.name)},onChange:t=>{b(t.target.value,e.name)},autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,required:!!e.label&&e.required,onKeyPress:t=>{t.key===K&&f(t,e.name)}})):r().createElement(l.Z.Input,D({},m,{label:""!==e.label?e.label:null,width:e.width,error:!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e)))},type:e.type,placeholder:e.placeholder,name:e.name,value:k.get(e.name)||"",onBlur:t=>{f(t,e.name)},onChange:t=>{b(t.target.value,e.name)},autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,required:!!e.label&&e.required,onKeyPress:t=>{t.key===K&&f(t,e.name)},onKeyDown:"number"===e.type?e=>{const t=/^[0-9]$/i.test(e.key),a=("a"===e.key||"v"===e.key||"c"===e.key||"x"===e.key)&&(!0===e.ctrlKey||!0===e.metaKey)||"ArrowRight"===e.key||"ArrowLeft"==e.key||"Delete"===e.key||"Backspace"===e.key;!t&&!a&&e.preventDefault()}:()=>{},onPaste:"number"===e.type?e=>{const t=e.clipboardData.getData("Text");!/^[0-9]+$/i.test(t)&&e.preventDefault()}:()=>{}})):O(e)?r().createElement(l.Z.Group,{grouped:!0},""!==e.label?r().createElement("label",null,e.label):null,e.hint&&r().createElement(j,{hint:e.hint}),e.children.map(((t,a)=>{const{hint:n,label:o,value:s,...d}=t,i=r().createElement(l.Z.Field,{key:a},r().createElement(c.Z,D({},m,{label:o,name:e.name,value:s,checked:k.get(e.name)===s,onChange:(t,{value:a})=>{e?.onBefore&&!e.onBefore(t,a)||b(a.toString(),e.name)},onBlur:t=>{f(t,e.name)},autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,onKeyPress:t=>{t.key===K&&f(t,e.name)}},d)));return n&&n.content?r().createElement(u.Z,{key:`${a}-popup`,header:n.header,content:n.content,trigger:i,popper:r().createElement("div",{style:{filter:"none"}})}):i}))):P(e)?r().createElement(l.Z.Select,D({},m,{label:""!==e.label?e.label:null,placeholder:e.placeholder,options:e.children,value:k.get(e.name),width:e.width,onChange:(t,{value:a})=>{b(a.toString(),e.name)},onBlur:t=>{f(t,e.name)},error:!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e)))},autoFocus:e.autoFocus||!1,disabled:e.disabled,required:!!e.label&&e.required,onKeyPress:t=>{t.key===K&&f(t,e.name)}})):F(e)?r().createElement(l.Z.Group,{grouped:!0},e.label&&e.required?r().createElement("div",{className:"required field"},r().createElement("label",null,e.label)):r().createElement("div",{className:"field"},r().createElement("label",null,e.label)),e.hint&&r().createElement(j,{hint:e.hint}),e.children.map(((a,o)=>{const s=r().createElement(l.Z.Field,{key:o},r().createElement(l.Z.Checkbox,D({},m,{label:a.label,name:e.name,value:a.value,checked:k.get(e.name)&&k.get(e.name).includes(a.value),onChange:(t,{value:a})=>{E(a.toString(),e.name)},onBlur:t=>{f(t,e.name)},error:0===o?!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e))),pointing:"left"}:t,autoFocus:e.autoFocus||!1,readOnly:e.readOnly||a.readOnly,disabled:a.disabled??e.disabled,defaultChecked:e.defaultChecked,onKeyPress:t=>{t.key===K&&f(t,e.name)}})));return a.hint&&a.hint.content?r().createElement(u.Z,{key:`${o}-popup`,header:a.hint.header,content:a.hint.content,trigger:s,popper:r().createElement("div",{style:{filter:"none"}})}):s}))):q(e)?r().createElement(l.Z.Group,{grouped:!0},r().createElement("label",null,e.label,e.label&&e.required?r().createElement("span",{className:"ui text color red"},"*"):null),r().createElement(C,{value:e.value,defaultValue:e.defaultValue,"data-componentid":e["data-testid"],error:t?n[0]:"",onBlur:t=>{f(t,e.name)},onChange:t=>{b(t.target.value,e.name)}})):B(e)?r().createElement(l.Z.Group,{grouped:!0},r().createElement("label",null,e.label,e.label&&e.required?r().createElement("span",{className:"ui text color red"},"*"):null),r().createElement(Z,{name:e.name,value:e.value,onChange:t=>{b(t.target.value,e.name)}})):x(e)?r().createElement(l.Z.Checkbox,D({},m,{label:e.label,name:e.name,value:e.value,checked:"true"===k.get(e.name),onChange:()=>{v(e.name)},onBlur:t=>{f(t,e.name)},error:!!t&&{content:n.map(((e,t)=>r().createElement("p",{key:t},e))),pointing:"left"},autoFocus:e.autoFocus||!1,readOnly:e.readOnly,disabled:e.disabled,defaultChecked:e.defaultChecked,onKeyPress:t=>{t.key===K&&f(t,e.name)}})):"submit"===e.type?r().createElement(d.Z,D({},m,{primary:!0,size:e.size,className:e.className,type:e.type,disabled:!!e.disabled&&e.disabled(k)}),e.icon&&r().createElement(i.Z,{name:e.icon}),e.value):"reset"===e.type?r().createElement(d.Z,D({},m,{size:e.size,className:e.className,onClick:w,disabled:!!e.disabled&&e.disabled(k)}),e.icon&&r().createElement(i.Z,{name:e.icon}),e.value):(e=>"button"===e.type)(e)?r().createElement(d.Z,D({},m,{size:e.size,className:e.className,onClick:t=>{t.preventDefault(),e.onClick()},disabled:!!e.disabled&&e.disabled(k)}),e.icon&&r().createElement(i.Z,{name:e.icon}),e.value):(e=>"divider"===e.type)(e)?r().createElement(p.Z,{hidden:e.hidden}):(e=>"custom"===e.type)(e)?e.element:void 0})(o)))})),j=({hint:e})=>r().createElement("div",{className:"ui-hint"},r().createElement(i.Z,{color:"grey",floated:"left",name:"info circle"}),e),V=e=>{const{wrapper:t,wrapperProps:a,children:n}=e,l=t;return r().createElement(l,a,n)},z=r().forwardRef(((e,t)=>null)),I=e=>null;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_.apply(this,arguments)}const A=r().forwardRef(((e,t)=>{const{onSubmit:a,resetState:o,submitState:s,onChange:c,onSubmitError:u,children:d,...i}=e,[p,m]=(0,n.useState)(new Map),[y,f]=(0,n.useState)(!0),[g,b]=(0,n.useState)(new Map),v=(0,n.useRef)(new Map),[E,w]=(0,n.useState)(new Map),[k,Z]=(0,n.useState)(new Map),[C,S]=(0,n.useState)(new Map),B=(0,n.useRef)(new Map),[D,K]=(0,n.useState)(!1),[j,A]=(0,n.useState)(!1),G=(0,n.useRef)(new Map),[T,$]=(0,n.useState)(!1),L=(0,n.useRef)(!1),H=[],J=[];let Q=!1;const U=e=>{c&&"function"==typeof c&&c(y,e)},W=(e,t)=>{r().Children.map(J,(a=>{a.props.name&&a.props.name===e&&a.props.listen&&"function"==typeof a.props.listen&&a.props.listen(t)}))},X=(e,t)=>{const a=new Map(p),n=new Map(E),r=new Map(k);a.set(t,e),n.set(t,!0),r.set(t,!0),W(t,a),U(a),m(a),f(!1),w(n),Z(r)},Y=e=>{const t=new Map(p),a=new Map(E);t.set(e,"true"===t.get(e)?"false":"true"),a.set(e,!0),W(e,t),U(t),m(t),f(!1),w(a)},ee=(e,t)=>{const a=new Map(p),n=a.get(t),r=new Map(E);let l=-1;n.forEach(((t,a)=>{t===e&&(l=a)})),-1===l?n.push(e):n.splice(l,1),a.set(t,n),r.set(t,!0),W(t,a),U(a),m(a),f(!1),w(r)},te=async(e,t)=>{const a=new Map(B.current),n=new Map(v.current),r=new Map(k),l=new Map(E);L.current=!0,r.set(t,!1),l.set(t,!0),$(!0),w(l),await(async(e,t,a)=>{const n=H.find((t=>N(t)&&t.name===e)),r=p.get(e);if(N(n)&&!O(n)&&n.required)if(F(n)||x(n))x(n)?null!==r&&"false"!==r?t.set(e,!0):t.set(e,!1):null!==r&&r.length>0?t.set(e,!0):t.set(e,!1);else{const a=new Map(p);a.set(e,a.get(e)?.toString()?.trim()),m(a),null!==r&&""!==r?.toString()?.trim()?t.set(e,!0):t.set(e,!1)}const l={errorMessages:[],isValid:!0};(M(n)||P(n)||q(n))&&n.validation&&null!==p.get(e)&&""!==p.get(e)&&await n.validation(p.get(e),l,new Map(p)),a.set(e,{errorMessages:l.errorMessages,isValid:l.isValid})})(t,a,n),v.current=new Map(n),B.current=new Map(a),L.current=!1,$(!1),b(n),S(a),Z(r)},ae=e=>{const t=new Map(p),a=new Map(B.current),n=new Map(v.current),r=new Map(E),l=new Set;H.forEach((o=>{if(N(o)){(!E.get(o.name)||e||o.enableReinitialize&&G.current.get(o.name)!==o.value)&&(o.value&&!e?t.set(o.name,o.value):(O(o)||P(o))&&o.default?t.set(o.name,o.default):F(o)?t.set(o.name,[]):x(o)?t.set(o.name,"false"):t.set(o.name,""),G.current.set(o.name,o.value));const s=t.get(o.name);(s instanceof Array&&s.length>0||!(s instanceof Array)&&s.trim&&s.trim())&&!e||O(o)||!o.required?a.set(o.name,!0):a.set(o.name,!1),n.has(o.name)&&!e||(n.set(o.name,{errorMessages:[],isValid:!0}),r.set(o.name,!1)),l.add(o.name)}}));const o=(e,t)=>{const a=new Map(e);return e.forEach(((e,n)=>{t.has(n)||a.delete(n)})),a},s=o(t,l),c=o(a,l),u=o(n,l),d=o(r,l);e||w(d),m(s),v.current=u,B.current=c,b(u),S(c)},ne=e=>{Q?Q=!1:e?(Q=!0,ae(!0)):ae(!1)},re=()=>{K(!1),ne(!0)},le=e=>{e.preventDefault(),re(),Q=!1};(0,n.useEffect)((()=>{j&&!L.current?(()=>{let e=!0;return B.current.forEach((t=>{t||(e=!1)})),e})()&&(()=>{let e=!0;return v.current.forEach((t=>{t.isValid||(e=!1)})),e})()?(A(!1),K(!1),a&&a(p)):(u&&u(C,g),K(!0),A(!1)):j&&K(!0)}),[j,T]);const oe=()=>{A(!0)},se=e=>N(e)&&!O(e)&&e.required&&!C.get(e.name)&&!k.get(e.name)&&(D||E.get(e.name)&&"blur"===e.displayErrorOn)?{errorMessages:[e.requiredErrorMessage],isError:!0}:(M(e)||P(e)||q(e))&&g.get(e.name)&&!k.get(e.name)&&!g.get(e.name).isValid&&(D||E.get(e.name)&&"blur"===e.displayErrorOn)?{errorMessages:g.get(e.name).errorMessages,isError:!0}:{errorMessages:[],isError:!1};h((()=>{oe()}),[s]),h((()=>{re()}),[o]),(0,n.useEffect)((()=>{ne(!1)}),[d]);const ce=(e,t)=>r().Children.map(e,(e=>{if(e)return e.type===z?(t.push(e.props),J.push(e),r().createElement(R,{formProps:{checkError:se,form:p,handleBlur:te,handleChange:X,handleChangeCheckBox:ee,handleReset:le,handleToggle:Y},passedProps:{...e.props},ref:e.ref})):e.type===I?r().createElement(V,{...e.props,children:ce(e.props.children,t)}):e.props&&e.props.children&&r().Children.count(e.props.children)>0?r().createElement(e.type,{...e.props,children:ce(e.props.children,t)}):e})),ue=d?[...ce(d,H)]:null;return r().createElement(l.Z,_({},i,{noValidate:!0,ref:t,onSubmit:e=>{e.preventDefault(),oe()}}),ue)}));A.defaultProps={resetState:!1,submitState:!1}}}]);